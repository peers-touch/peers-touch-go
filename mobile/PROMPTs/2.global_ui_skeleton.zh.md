# 移动端 LobeChat 风格 UI 骨架（四层导航适配）

本规范定义移动端在不同设备密度/尺寸下的导航骨架与布局约束，确保与桌面端的认知一致性，同时遵循移动手势与安全区。

## 设计参考基准

- LobeChat 的四层导航理念：主区（内容）+ 次级（上下文）+ 辅助（工具/信息）+ 系统（设置/全局）
- 移动端适配：底部一级导航 + 顶部/页面内二级导航 + 右侧/底部三级辅助 + 设置与初始化的系统层

## 设备断点与安全区

- Phone：`≤ 600dp`（单列内容）
- Small Tablet：`600–840dp`（双列：内容 + 侧栏）
- Large Tablet：`≥ 840dp`（三列：侧栏 + 内容 + 辅助）
- 安全区：统一使用 SafeArea；横屏下保留左右阅读安全线（`24dp`）

## 一级导航（底部 TabBar）

- 内容：`Chat / Circles / Discover / AI / Me`
- 高度：`56–64dp`（含安全区）
- 选中态：主色标签 + 高亮图标；未选中态灰度图标
- 行为：支持二次点击回到列表顶部；长按唤出快速入口（如新建对话）

## 二级导航（TopBar / SegmentedTabs / Drawer）

- TopBar：`56dp` 高度，左侧返回/菜单，中间标题，右侧主动作
- SegmentedTabs：用于同一模块内的子页签（如 Chat：全部/未读/置顶）
- Drawer：左侧滑出，宽度 `280dp`（平板侧栏常驻可缩至 `88dp` 图标栏）

## 三级辅助区（SlideOver / BottomSheet）

- Phone：优先使用 BottomSheet（半高 `360dp` 或自适），不遮挡底部导航
- Tablet：右侧 SlideOver，宽度 `320–360dp`，随内容滚动或固定
- 用途：展示用户档案、会话信息、AI 工具面板、操作确认等

## 内容区（主区）

- Phone：单列列表/详情；横屏允许并列（列表 + 详情）
- Tablet：双列或三列（侧栏 + 列表 + 详情/辅助）
- 宽度约束：读取安全线 `24dp`；卡片最大宽 `640dp`；消息输入区固定下沿

## 折叠与拓展行为

- 底部导航在上滑时轻度隐藏（`8–12dp`），下滑露出；平板常驻
- TopBar 随滚动压缩至 `48dp`，标题渐隐/渐现；SegmentedTabs 与内容区同步滚动
- 辅助区可拖拽高度；抽屉支持滑动与点击关闭

## 动效与时间基准

- 页面切换：`200–300ms`（easeInOut / fastOutSlowIn）
- 抽屉/侧滑：`180–240ms`（easeOut）
- BottomSheet：`200–260ms`（easeOut，阻尼弹性可选）
- 列表项：进出场 `120–180ms`；按压反馈 `80–120ms`

## 骨架态（Skeleton）

- 列表：头像圆形、标题矩形、副文本短条，Shimmer 速度 `1.2x`
- 详情：图片占位、段落占位；按钮与输入保持可见但禁用

## 四层导航注册机制

- 一级（TabBar）：在 `app_pages.dart` 中注册基础路由与页面绑定
- 二级（模块内）：模块 `xxx_binding.dart` 注入 Controller；页面内声明 SegmentedTabs
- 三级（辅助）：通过通用组件（`core/components/slide_over.dart`、`bottom_sheet.dart`）统一调用
- 系统层：设置页采用分组 + 折叠面板；初始化引导（Splash/Onboarding）在应用启动阶段完成

## 设置页架构

- 结构：账户/隐私/通知/主题/存储/网络；分组折叠 + 详情页
- 行为：更改主题/语言即时生效；隐私与网络提供风险提示与确认

## 应用初始化管理

- Splash → Onboarding（可选）→ 权限检查 → 依赖注入（InitialBinding）→ 首页路由
- 网络/存储异常处理与重试入口；离线态降级策略（缓存优先）